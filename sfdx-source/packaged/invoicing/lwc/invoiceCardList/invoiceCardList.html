<template>

    <lightning-card>

        <lightning-button-group slot="actions">
            <lightning-button label="Revert All" onclick={revertAllChanges}></lightning-button>
            <lightning-button label="Commit All" variant="brand" onclick={commitDirtyRecords}></lightning-button>
        </lightning-button-group>

        <div class="slds-is-relative">
            <template for:each={invoiceData} for:item='invoice'>
                <div key={invoice.Record.Id} class="slds-box slds-box_xx-small slds-m-around_medium">
                    <c-invoice-card
                        invoice-wrapper={invoice}
                        oninvoicechange={cacheUpdatedInvoice}
                        onlineitemcreate={cacheNewLineItem}
                        onlineitemdelete={cacheDeletedLineItem}
                        onlineitemchange={cacheUpdatedLineItem}>
                    </c-invoice-card>
                </div>
            </template>
            <template if:true={isWorking}>
                <lightning-spinner alternative-text="Retrieving Invoices ..." size="large"></lightning-spinner>
            </template>
        </div>

    </lightning-card>
    
</template>